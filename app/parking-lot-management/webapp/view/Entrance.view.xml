<mvc:View
    controllerName="com.app.parkinglotmanagement.controller.Entrance"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:tnt="sap.tnt"
    xmlns:mdc="sap.ui.mdc"
    xmlns:mdcValueHelp="sap.ui.mdc.valuehelp"
    xmlns:mdcValueHelpContent="sap.ui.mdc.valuehelp.content"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
    xmlns:viz.data="sap.viz.ui5.data"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:suite="sap.suite.ui.commons"
    height="100%"
    displayBlock="true"
>
    <tnt:ToolPage id="toolPage">
        <tnt:header>
            <tnt:ToolHeader id="toolHeader">
                <Button
                    id="sideNavigationToggleButton"
                    icon="sap-icon://menu2"
                    type="Transparent"
                    press=".onSideNavButtonPress"
                >
                    <layoutData>
                        <OverflowToolbarLayoutData
                            id="idNeverOverflow0"
                            priority="NeverOverflow"
                        />
                    </layoutData>
                </Button>
                <Title
                    id="idTitletext"
                    text="Parking-lot Management"
                />
                <ToolbarSpacer
                    id="toolbarSpacer1"
                    width="20px"
                />

                <tnt:ToolHeaderUtilitySeparator
                    id="toolHeaderUtilitySeparator"
                />
                <ToolbarSpacer id="toolbarSpacer2">
                    <layoutData>
                        <OverflowToolbarLayoutData
                            id="idNeverOverflow1"
                            priority="NeverOverflow"
                            minWidth="20px"
                        />
                    </layoutData>
                </ToolbarSpacer>
                <Button
                    id="idNotifications"
                    icon="sap-icon://bell-2"
                />
                <Image
                    id="sapLogo"
                    height="1.5rem"
                    class="sapUiSmallMarginBegin"
                    src="https://www.sap.com/dam/application/shared/logos/sap-logo-svg.svg"
                />
            </tnt:ToolHeader>
        </tnt:header>
        <tnt:sideContent>
            <tnt:SideNavigation
                id="sideNavigation"
                expanded="true"
                itemSelect=".onSelectItem"
            >
                <tnt:NavigationList id="navigationList">
                    <tnt:NavigationListItem
                        id="navigationAllSlots"
                        icon="sap-icon://dimension"
                        key="AllSlots"
                        text="All Slots"
                    />

                    <tnt:NavigationListItem
                        id="navigationAssigned"
                        icon="sap-icon://activity-assigned-to-goal"
                        key="AssignedSlots"
                        text="Assigned Slots"
                    />
                    <tnt:NavigationListItem
                        id="navigationParkinglotallocation"
                        icon="sap-icon://shipping-status"
                        key="Parking-lotAllocation"
                        text="Parking-lot Allocation"
                    />

                    <tnt:NavigationListItem
                        id="navigationHistory"
                        icon="sap-icon://history"
                        key="History"
                        text="History"
                    />
                    <tnt:NavigationListItem
                        id="navigationDataVisualization"
                        icon="sap-icon://pie-chart"
                        key="DataVisualization"
                        text="Data Visualization"
                    />
                    <tnt:NavigationListItem
                        id="navigationDataReservations"
                        icon="sap-icon://select-appointments"
                        key="Reservations"
                        text="Reservations"
                    />
                </tnt:NavigationList>
            </tnt:SideNavigation>
        </tnt:sideContent>
        <tnt:mainContents>
            <NavContainer
                id="pageContainer"
                initialPage="Page1"
            >
                <pages>
                    <ScrollContainer
                        id="Page1"
                        horizontal="false"
                        vertical="true"
                        height="100%"
                        class="sapUiContentPadding"
                    >
                        <Table
                            id="allSlotsTable"
                            alternateRowColors="true"
                            items="{/Parkingslots}"
                            selectionChange="onSelectSlot"
                        >
                            <headerToolbar>
                                <Toolbar id="allSlotstableToolbar">
                                    <Title
                                        id="allSlotstableTitle"
                                        text="All slots"
                                        titleStyle="H3"
                                    />
                                    <ToolbarSpacer id="toolbarspacer1" />
                                    <SearchField
                                        id="SearchField1"
                                        width="12rem"
                                        placeholder="Search"
                                        search="onSearch"
                                    />
                                    <Button
                                        id="_IDGenButton1"
                                        text="Add New Slot"
                                        type="Accept"
                                        press="onAddButton"
                                    />
                                </Toolbar>
                            </headerToolbar>
                            <columns>
                                <Column id="allSlotscolumn1">
                                    <Text
                                        id="allSlotscolumn1Text"
                                        text="Slot no"
                                    />
                                </Column>
                                <!-- <Column id="allSlotscolumn2">
                        <Text id="allSlotscolumn2Text" text="Type" />
                    </Column> -->
                                <Column id="allSlotscolumn3">
                                    <Text
                                        id="allSlotscolumn3Text"
                                        text="Availability"
                                    />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem
                                    id="allSlotscolumnListItem"
                                    type="Navigation"
                                >
                                    <cells>
                                        <Text
                                            id="alllotscellText1"
                                            text="{slotno}"
                                        />
                                        <Text
                                            id="allSlotscellText3"
                                            text="{Available}"
                                        />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </ScrollContainer>

                    <Dialog
                        id="AddDialog"
                        title="Parking-lot Reservation"
                        class="sapUiContentPadding"
                        contentHeight="20%"
                    >
                        <content>
                            <VBox id="_IDAddVBox1">
                                <Label
                                    id="inputAddSlotnoLabel"
                                    text="Slot no"
                                />
                                <Input id="inputAddSlotno" />
                            </VBox>
                        </content>
                        <buttons>
                            <Button
                                id="AddBtn"
                                text="Add"
                                press="onSaveAdd"
                                type="Accept"
                            />
                            <Button
                                id="AddcancelBtn"
                                text="Cancel"
                                press="onCancelAdd"
                                type="Emphasized"
                            />
                        </buttons>
                    </Dialog>

                    <ScrollContainer
                        id="Page2"
                        vertical="true"
                        height="100%"
                        class="sapUiContentPadding"
                    >
                        <Table
                            id="assignedSlotsTable"
                            growing="true"
                            inset="false"
                            items="{/Parkinglotassigndetails}"
                            mode="MultiSelect"
                            growingThreshold="10"
                        >
                            <headerToolbar>
                                <Toolbar id="assignedSlotstableToolbar">
                                    <Title
                                        id="assignedSlotstableTitle"
                                        text="Assigned Slots"
                                        titleStyle="H3"
                                    />
                                    <ToolbarSpacer id="toolbarspacer" />
                                    <SearchField
                                        id="SearchField2"
                                        width="12rem"
                                        placeholder="Search"
                                        search="onSearch"
                                    />
                                    <Button
                                        id="_IDGenButton3"
                                        class="black-background"
                                        icon="sap-icon://edit"
                                        press="onEdit"
                                    />
                                    <Button
                                        id="_IDGenButton4"
                                        class="black-background"
                                        text="Un-assigned"
                                        type="Emphasized"
                                        press="onUnAssign"
                                    />
                                    <!-- Dropdown Menu Button -->
                                    <MenuButton
                                        id="idMenubtnContainer"
                                        text="Download"
                                        type="Emphasized"
                                        icon="sap-icon://download"
                                    >
                                        <menu>
                                            <Menu id="idMenuBtnMenu">
                                                <MenuItem
                                                    id="idMenuItem1"
                                                    text="Excel"
                                                    icon="sap-icon://excel-attachment"
                                                    press="onExport"
                                                />
                                                <MenuItem
                                                    id="idMenuItem2"
                                                    text="Print"
                                                    icon="sap-icon://pdf-attachment"
                                                    press="onPrint"
                                                />
                                            </Menu>
                                        </menu>
                                    </MenuButton>
                                </Toolbar>
                            </headerToolbar>

                            <columns>
                                <Column id="assignedSlotscolumn1">
                                    <Text
                                        id="assignedSlotscolumn1Text"
                                        text="Vehicle no"
                                    />
                                </Column>
                                <Column id="assignedSlotscolumn2">
                                    <Text
                                        id="assignedSlotscolumn2Text"
                                        text="Driver name"
                                    />
                                </Column>
                                <Column id="assignedSlotscolumn3">
                                    <Text
                                        id="assignedSlotscolumn3Text"
                                        text="Phone no"
                                    />
                                </Column>
                                <Column id="assignedSlotscolumn4">
                                    <Text
                                        id="assignedSlotscolumn4Text"
                                        text="Type (Inward / Outward)"
                                    />
                                </Column>
                                <Column id="assignedSlotscolumn5">
                                    <Text
                                        id="assignedSlotscolumn5Text"
                                        text="Assign Time"
                                    />
                                </Column>
                                <Column id="assignedSlotscolumn6">
                                    <Text
                                        id="assignedSlotscolumn6Text"
                                        text="Slot no"
                                    />
                                </Column>
                                <Column
                                    id="assignedSlotscolumn7"
                                    visible="false"
                                >
                                    <Text
                                        id="assignedSlotscolumn7Text"
                                        text="Actions"
                                    />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem
                                    id="assignedSlotscolumnListItem"
                                >
                                    <cells>
                                        <VBox id="_IDassignedSlots1">
                                            <Text
                                                id="assignedSlotscellText1"
                                                text="{vehicleNo}"
                                            />
                                            <Input
                                                id="_IDassignedSlotsInputvehicleNo"
                                                visible="false"
                                                value="{vehicleNo}"
                                            />
                                        </VBox>
                                        <VBox id="_IDassignedSlots2">
                                            <Text
                                                id="assignedSlotscellText2"
                                                text="{driverName}"
                                            />
                                            <Input
                                                id="_IDassignedSlotsInputdriverName"
                                                visible="false"
                                                value="{driverName}"
                                            />
                                        </VBox>
                                        <VBox id="_IDassignedSlots3">
                                            <Text
                                                id="assignedSlotscellText3"
                                                text="{phoneNo}"
                                            />
                                            <Input
                                                id="_IDassignedSlotsInputphoneNo"
                                                visible="false"
                                                value="{phoneNo}"
                                            />
                                        </VBox>
                                        <VBox id="_IDassignedSlots4">
                                            <Text
                                                id="assignedSlotscellText4"
                                                text="{truckType}"
                                            />
                                            <Select
                                                id="_IDEditInput4"
                                                visible="false"
                                                selectedKey="{truckType}"
                                            >
                                                <items>
                                                    <core:Item
                                                        id="_IDEditItem1"
                                                        text="Inward"
                                                        key="Inward"
                                                    />
                                                    <core:Item
                                                        id="_IDEditItem2"
                                                        text="Outward"
                                                        key="Outward"
                                                    />
                                                </items>
                                            </Select>
                                        </VBox>
                                        <VBox id="_IDassignedSlots5">
                                            <Text
                                                id="assignedSlotscellText5"
                                                text="{assigntime}"
                                            />
                                            <Input
                                                id="_IDassignedSlotsInputassigntime"
                                                visible="false"
                                                value="{assigntime}"
                                                editable="false"
                                            />
                                        </VBox>
                                        <VBox id="_IDassignedSlots6">
                                            <Text
                                                id="assignedSlotscellText6"
                                                text="{parkingslot/slotno}"
                                            />
                                            <Select
                                                id="_IDassignedSlotsInputparkingLotSelect"
                                                selectedKey=""
                                                items="{path: '/Parkingslots', filters: [{path: 'Available', operator: 'EQ', value1: true }], templateShareable:true}"
                                                visible="false"
                                            >
                                                <core:Item
                                                    id="_IDEditItem4"
                                                    key="{slotno}"
                                                    text="{slotno}"
                                                />
                                            </Select>
                                        </VBox>
                                        <VBox id="_IDSaveEdit">
                                            <Button
                                                id="_IDSaveEditBtn"
                                                text="Save"
                                                type="Emphasized"
                                                visible="false"
                                                press="onSaveEdit"
                                            />
                                        </VBox>
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </ScrollContainer>

                    <ScrollContainer
                        id="Page3"
                        horizontal="true"
                        vertical="false"
                        height="100%"
                        class="sapUiContentPadding"
                    >
                        <VBox
                            id="reservationForm"
                            alignItems="End"
                        >
                            <Button
                                id="_IDGenButtonReserve"
                                text="Reserve Slot"
                                type="Emphasized"
                                press="onReserve"
                            />
                        </VBox>

                        <VBox
                            id="idAssignslots"
                            class="sapUiSmallMargin"
                            width="35%"
                        >
                            <Label
                                id="_IDHeadLabel"
                                text="Parking-lot Allocation"
                                class="sapUiSmallMarginTop"
                            />
                            <FlexBox
                                id="_IDField1"
                                justifyContent="SpaceBetween"
                                alignItems="Center"
                                class="sapUiSmallMarginTop"
                            >
                                <Label
                                    id="_IDVehicleNoLabel"
                                    text="Vehicle No:"
                                />
                                <Input
                                    id="_IDGenInput1"
                                    value=""
                                    placeholder="Enter Vehicle No"
                                />
                            </FlexBox>

                            <FlexBox
                                id="_IDField2"
                                justifyContent="SpaceBetween"
                                alignItems="Center"
                                class="sapUiSmallMarginTop"
                            >
                                <Label
                                    id="_IDDriverNameLabel"
                                    text="Driver Name:"
                                />
                                <Input
                                    id="_IDGenInput2"
                                    value=""
                                    placeholder="Enter Driver Name"
                                />
                            </FlexBox>
                            <FlexBox
                                id="_IDField3"
                                justifyContent="SpaceBetween"
                                alignItems="Center"
                                class="sapUiSmallMarginTop"
                            >
                                <Label
                                    id="_IDPhoneNoLabel"
                                    text="Phone No:"
                                />
                                <Input
                                    id="_IDGenInput3"
                                    value=""
                                    placeholder="Enter Phone No"
                                />
                            </FlexBox>
                            <FlexBox
                                id="_IDField4"
                                justifyContent="SpaceBetween"
                                alignItems="Center"
                                class="sapUiSmallMarginTop"
                            >
                                <Label
                                    id="_IDTruckTypeLabel"
                                    text="Truck Type:"
                                />
                                <Select
                                    id="_IDGenInput4"
                                    selectedKey=""
                                >
                                    <items>
                                        <core:Item
                                            id="_IDGenItem1"
                                            text="Inward"
                                            key="Inward"
                                        />
                                        <core:Item
                                            id="_IDGenItem2"
                                            text="Outward"
                                            key="Outward"
                                        />
                                    </items>
                                </Select>
                            </FlexBox>
                            <FlexBox
                                id="_IDField5"
                                justifyContent="SpaceBetween"
                                alignItems="Center"
                                class="sapUiSmallMarginTop"
                            >
                                <Label
                                    id="_IDSlotnoLabel"
                                    text="Slot No:"
                                />
                                <Select
                                    id="parkingLotSelect"
                                    selectedKey=" "
                                    items="{path: '/Parkingslots', filters: [{path: 'Available', operator: 'EQ', value1: true}]}"
                                >
                                    <core:Item
                                        id="_IDGenItem4"
                                        key="{slotno}"
                                        text="{slotno}"
                                    />
                                </Select>
                            </FlexBox>
                            <FlexBox
                                id="_IDField6"
                                justifyContent="End"
                                class="sapUiSmallMarginTop"
                            >
                                <Button
                                    id="idAssignSlot"
                                    text="Assign"
                                    press=".onSelectAssign"
                                />
                            </FlexBox>
                            <Label id="idEmptyRow" />
                        </VBox>
                    </ScrollContainer>

                    <ScrollContainer
                        id="Page4"
                        horizontal="false"
                        vertical="true"
                        height="100%"
                        class="sapUiContentPadding"
                    >
                        <Table
                            id="historyTable"
                            inset="false"
                            items="{/ParkingHistory}"
                        >
                            <headerToolbar>
                                <Toolbar id="historytableToolbar">
                                    <Title
                                        id="historytableTitle"
                                        text="History"
                                        titleStyle="H3"
                                    />
                                    <ToolbarSpacer id="toolbarspacer3" />
                                    <SearchField
                                        id="SearchField3"
                                        width="12rem"
                                        placeholder="Search"
                                        search="onSearch"
                                    />
                                    <Button
                                        id="_IDGenButton8"
                                        text="Export"
                                        type="Emphasized"
                                        icon="sap-icon://excel-attachment"
                                        press="onHistoryExport"
                                    />
                                </Toolbar>
                            </headerToolbar>
                            <columns>
                                <Column id="historycolumn1">
                                    <Text
                                        id="historycolumn1Text"
                                        text="Slot no"
                                    />
                                </Column>
                                <Column id="historycolumn2">
                                    <Text
                                        id="historycolumn2Text"
                                        text="Type (Inbound / Outbound)"
                                    />
                                </Column>
                                <Column id="historycolumn3">
                                    <Text
                                        id="historyscolumn3Text"
                                        text="Vehicle no"
                                    />
                                </Column>
                                <Column id="historycolumn4">
                                    <Text
                                        id="historycolumn4Text"
                                        text="Driver name"
                                    />
                                </Column>
                                <Column id="historycolumn5">
                                    <Text
                                        id="historycolumn5Text"
                                        text="Phone no"
                                    />
                                </Column>

                                <Column id="historycolumn6">
                                    <Text
                                        id="historycolumn6Text"
                                        text="Assigned (Date / Time)"
                                    />
                                </Column>
                                <Column id="historycolumn7">
                                    <Text
                                        id="historycolumn7Text"
                                        text="Un-Assigned (Date / Time)"
                                    />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem id="historycolumnListItem">
                                    <cells>
                                        <Text
                                            id="historycellText1"
                                            text="{parkingslots/slotno}"
                                        />
                                        <Text
                                            id="historycellText2"
                                            text="{vehicalType}"
                                        />
                                        <Text
                                            id="historycellText3"
                                            text="{vehicalNo}"
                                        />
                                        <Text
                                            id="historycellText4"
                                            text="{driverName}"
                                        />
                                        <Text
                                            id="historycellText5"
                                            text="{phone}"
                                        />
                                        <Text
                                            id="historycellText6"
                                            text="{assignedDate}"
                                        />
                                        <Text
                                            id="historycellText7"
                                            text="{unassignedDate}"
                                        />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </ScrollContainer>
                    <ScrollContainer
                        id="Page5"
                        horizontal="false"
                        vertical="true"
                        height="100%"
                        class="sapUiContentPadding"
                    >
                            <VBox
                                id="vbox"
                                fitContainer="true"
                            >
                                <suite:ChartContainer id="chartContainer">
                                    <suite:content>
                                        <suite:ChartContainerContent
                                            id="chartContainerContent"
                                        >
                                            <suite:content>
                                                <viz:VizFrame
                                                    id="idpiechart"
                                                    width="auto"
                                                    uiConfig="{applicationSet:'fiori'}"
                                                    vizType="pie"
                                                    vizProperties="{
                                        plotArea: {
                                            dataLabel: {visible: true},
                                            colorPalette: ['#57DA2A', '#EA2365']
                                        },
                                        title: {text:'Parking Lot Availability'}
                                    }"
                                                    selectData="myOnClickHandler"
                                                    renderComplete="handleRenderComplete"
                                                >
                                                    <viz:dataset>
                                                        <viz.data:FlattenedDataset
                                                            id="flattenData"
                                                            data="{ParkingLotModel>/Items}"
                                                        >
                                                            <viz.data:dimensions
                                                            >
                                                                <viz.data:DimensionDefinition
                                                                    id="_IDGenDimensionDefinition1"
                                                                    name="Available"
                                                                    value="{ParkingLotModel>Name}"
                                                                />
                                                            </viz.data:dimensions>
                                                            <viz.data:measures>
                                                                <viz.data:MeasureDefinition
                                                                    id="_IDGenMeasureDefinition1"
                                                                    name="Count"
                                                                    value="{ParkingLotModel>Count}"
                                                                />
                                                            </viz.data:measures>
                                                        </viz.data:FlattenedDataset>
                                                    </viz:dataset>

                                                    <viz:feeds>
                                                        <viz.feeds:FeedItem
                                                            id="_IDGenFeedItem1"
                                                            uid="size"
                                                            type="Measure"
                                                            values="Count"
                                                        />
                                                        <viz.feeds:FeedItem
                                                            id="_IDGenFeedItem2"
                                                            uid="color"
                                                            type="Dimension"
                                                            values="Available"
                                                        />
                                                    </viz:feeds>
                                                </viz:VizFrame>
                                            </suite:content>
                                        </suite:ChartContainerContent>
                                    </suite:content>
                                </suite:ChartContainer>
                            </VBox>
                    </ScrollContainer>
                </pages>
            </NavContainer>
        </tnt:mainContents>
    </tnt:ToolPage>
</mvc:View>
